## Определение характеристик
Из требований выделим следующие важные моменты в проекте:
- Деньги на данный момент не критичны, happy cat box готовы потратить столько, сколько потребуется.
- Низкий TTM
- Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью.
- Отбор кандидатов. Мы ожидаем 1 к заявок в день от рандомных котов, также, судя по отзывам, наши конкуренты могут попытаться нас заддосить в этом месте
- Общая нагрузка на систему не будет превышать 10 заказов в день и 100 клиентов. Воркеров будет 20 человек.
Плюс добавим новые требования из условий домашнего задания:
- **Топ-менеджмент**:
  - Логика тестирования кандидатов сложнее, чем предполагалось
  - Релизный цикл тестирования кандидатов - неделя максимум
  - Релизный цикл для всей системы - месяц
- **Менеджеры**
  - О системе ставок никто не должен знать
  - 10 заказов в минуту, а не в день
- **Финотдел**
  - Списывать деньги с клиентов раз в месяц
  - Платить воркерам раз в неделю
  - Очень важно не потерять финансовую информацию
- **Разработчики**
  - Система должна работать без сбоев
- **Админы**
  - Простота мониторинга для своевременного замечания сбоев
- **Юристы**
  - Соответствие всей системы правовым нормам
- **Клиенты**
  - Чтобы все нормально работало

Ниже приведена таблица с общей оценкой характеристик по данному проекту:

|Характеристика|Важность|
|---|---|
|Availability|⭐️⭐️⭐️|
|Scalability|⭐️⭐️⭐️⭐️⭐️|
|Modifiability|⭐️⭐️⭐️⭐️⭐️|
|Maintainability|⭐️⭐️⭐️⭐️⭐️|
|Securability|⭐️⭐️⭐️|
|Performance|⭐️⭐️⭐️⭐️⭐️|
|Agility|⭐️⭐️⭐️⭐️⭐️|
|Testability|⭐️⭐️⭐️⭐️⭐️|
|Deployability|⭐️⭐️⭐️⭐️⭐️|
|Usability|⭐️⭐️⭐️|
|Consistency|⭐️⭐️⭐️|
|Simplicity|⭐️⭐️⭐️|

Пояснение к таблице:
- Modifiability важен, так как есть поддомены с высокой изменчивостью
- Agility, testability и deployability наиболее важны, так как требуется минимальный ТТМ
- Scalability, modifiability, maintainability, testability, agility и evolvability - важны, так как бизнес находится на этапе роста (судя по всему, идея уже проработана, осталось лишь оптимизировать устающих котов-тестировщиков, чтобы повысить их продуктивность), наша система для MCF делается для того чтобы способствовать этому росту.
- Performance важен так как будет 10 заказов в минуту.
- Securability, usability, simplicity, consistency, availability - важны, но не так сильно важны, если сравнивать с другими важными характеристиками.

Определим характеристики отдельно для каждого поддомена, учитывая требования к проекту и требования разных лиц. Ниже приведен рисунок с характеристиками для каждого поддомена.
![[Характеристики.svg]]

Рассмотрим таблицу характеристик архитектурных стилей.

| |layered|modular monolith|service-based|microservices|microkernel|pipeline|event-driven|
|---|---|---|---|---|---|---|---|
|❗agility|⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️|
|abstraction|⭐️|⭐️|⭐️|⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|
|configurability|⭐️|⭐️|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️|
|cost|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|
|❗deployability|⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️|
|domain part.|⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️|⭐️⭐️⭐️⭐️⭐️|
|elasticity|⭐️|⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️|⭐️|⭐️⭐️⭐️⭐️|
|evolvability|⭐️|⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|
|fault-tolerance|⭐️|⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️|⭐️|⭐️⭐️⭐️⭐️⭐️|
|interation|⭐️|⭐️|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|
|interoperability|⭐️|⭐️|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️|
|❗maintainability|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|
|❗modifiability|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️|
|modularity|⭐️|⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|
|❗performance|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|
|reliability|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|
|❗scalability|⭐️|⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️|⭐️|⭐️⭐️⭐️⭐️⭐️|
|security|⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|
|simplicity|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|⭐️|
|❗testability|⭐️⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️⭐️|⭐️⭐️|
|workflow|⭐️|⭐️|⭐️|⭐️|⭐️⭐️|⭐️⭐️⭐️⭐️|⭐️⭐️⭐️⭐️⭐️|

Знаком ❗ отмечены наиболее важные характеристики для проекта.

Три характеристики наиболее важные из остальных: agility, deployability и testability. Поэтому, выбор остается между service-based и microservices.

Определим конечную структуру системы. Выделим в отдельный сервис расчет стоимости услуг, так как он требует безопасности (будет включать данные кредитных карт клиентов), и его данные следует отделить от остальных. В отдельный сервис выделим оформление заказов и их выполнение. В отдельный сервис выделим планирование работы воркеров и сборку расходников. Производство fur-tune печеньев отдадим подрядчику. Расчет выплат будет в отдельном сервисе, так как к немы предъявлены высокие требования по безопасности и полноте. А золотая шляпа, очевидно, внешняя система. О системе ставок никто не должен знать, поэтому она будет отдельно. Отслеживание результатов выполнения заказов будет отдельно. Матчинг тоже будет отдельным сервисом, так как он требует много данных, и для эффективной работы алгоритмов из придется хранить в особой форме.

В итоге, конечная структура MCF выглядит как показано ниже на рисунке.
![[Конечная структура системы.svg]]

На мой взгляд, гораздо лучше выполнить реализацию системы в виде **микросервисов**, так как не получается выделить общую базу данных, исходя из характеристик и требованиям к сервисам. К тому же микросервисы имеют высокие modifiability, maintainability, что очень важно для нас.

В итоге на каджый сервис будет своя база данных.

## Выбор баз данных

На мой взгляд, для всех получившихся сервисов подойдут реляционные базы данных. Они имеют высокий показатель consistency, а это важно для некоторых частей системы, да и другим не помешает. Документно-ориентированные не подойдут, так как мы не храним документо-подобные данные.
